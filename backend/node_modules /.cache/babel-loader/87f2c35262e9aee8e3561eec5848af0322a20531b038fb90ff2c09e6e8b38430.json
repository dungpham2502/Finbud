{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport ChatHeader from '../components/ChatHeader.vue';\nimport ChatFrame from '../components/ChatFrame.vue';\nimport MessageComponent from '../components/MessageComponent.vue';\nimport UserInput from '../components/UserInput.vue';\nimport { fetchStockPrice } from '@/services/stockServices';\nimport SideBar from '../components/SideBar.vue';\nexport default {\n  name: 'ChatView',\n  props: ['threadId'],\n  components: {\n    ChatHeader,\n    ChatFrame,\n    MessageComponent,\n    UserInput,\n    SideBar\n  },\n  data() {\n    return {\n      newMessage: '',\n      messages: [],\n      userAvatar: require('@/assets/tri.jpeg'),\n      botAvatar: require('@/assets/bot.png'),\n      currentThread: {},\n      threads: []\n    };\n  },\n  watch: {\n    threadId: {\n      immediate: true,\n      handler(newThreadId) {\n        console.log('Received new thread ID:', newThreadId);\n        if (newThreadId != null) {\n          this.updateCurrentThread(newThreadId);\n        }\n      }\n    }\n  },\n  methods: {\n    clearMessage() {\n      this.newMessage = '';\n    },\n    updateCurrentThread(newThreadId) {\n      console.log(\"Update current thread function triggered: \", newThreadId);\n      const thread = this.threads.find(thread => thread.id.toString() === newThreadId);\n      console.log(thread);\n      if (thread) {\n        this.currentThread = thread;\n        this.messages = thread.messages || [];\n      } else {\n        console.error('Thread with ID', newThreadId, 'not found');\n        this.currentThread = {};\n        this.messages = [];\n      }\n      console.log(\"Current thread: \", this.currentThread);\n    },\n    addThread(newThread) {\n      newThread.id = this.threads.length + 1;\n      this.threads.push(newThread);\n      console.log(\"Added new thread: \", newThread);\n    },\n    editThread(index) {\n      this.threads[index].editing = true;\n    },\n    saveThreadName({\n      newName,\n      index\n    }) {\n      this.threads[index].name = newName;\n      this.threads[index].editing = false;\n    },\n    cancelEdit(index) {\n      this.threads[index].editing = false;\n    },\n    selectThread(index) {\n      this.updateCurrentThread(this.threads[index].id.toString());\n    },\n    async sendMessage(newMessage) {\n      console.log(\"start sending message in send message..\");\n      this.messages.push({\n        text: newMessage.trim(),\n        isUser: true,\n        typing: true,\n        timestamp: new Date().toLocaleTimeString()\n      });\n      this.newMessage = '';\n      const userMessage = this.messages[this.messages.length - 1].text;\n      if (userMessage.toLowerCase().includes(\"define\")) {\n        const term = userMessage.substring(userMessage.toLowerCase().indexOf(\"define\") + \"define\".length).trim();\n        try {\n          const response = await axios.post('/api/define-term', {\n            term\n          });\n          this.addTypingResponse(response.data.definition, false);\n        } catch (error) {\n          console.error('Error:', error);\n          this.messages.push({\n            text: `Error defining term.`,\n            isUser: false,\n            timestamp: new Date().toLocaleTimeString()\n          });\n        }\n      } else {\n        const stockCode = this.extractStockCode(userMessage);\n        if (stockCode.length > 0) {\n          try {\n            const price = await fetchStockPrice(stockCode[0]);\n            const timeStamp = new Date().toLocaleTimeString();\n            console.log(\"This is time stamp when asking about stock price: \", timeStamp);\n            let responseText = `The current price of ${stockCode[0]} stock is $${price}, as of ${timeStamp}.`;\n            this.addTypingResponse(responseText, false);\n            const response = await axios.post('/api/analyze-stock', {\n              stockSymbol: stockCode[0]\n            });\n            this.addTypingResponse(response.data.analysis, false);\n          } catch (error) {\n            console.error('Error:', error);\n            this.messages.push({\n              text: `Error fetching data for ${stockCode}.`,\n              isUser: false,\n              timestamp: new Date().toLocaleTimeString()\n            });\n          }\n        } else {\n          try {\n            const response = await axios.post('/api/norm-ans', {\n              term: userMessage\n            });\n            this.addTypingResponse(response.data.definition, false);\n          } catch (error) {\n            console.error('Error:', error);\n            this.messages.push({\n              text: `Error generating answer.`,\n              isUser: false,\n              timestamp: new Date().toLocaleTimeString()\n            });\n          }\n        }\n      }\n    },\n    addTypingResponse(text, isUser) {\n      const typingMessage = {\n        text: text,\n        isUser: isUser,\n        typing: true,\n        timestamp: new Date().toLocaleTimeString(),\n        username: isUser ? 'You' : 'FinBud Bot'\n      };\n      this.messages.push(typingMessage);\n      setTimeout(() => {\n        typingMessage.text = text;\n        typingMessage.typing = false;\n        this.$forceUpdate();\n      }, 2000);\n    },\n    extractStockCode(message) {\n      const pattern = /\\b[A-Z]{3,5}\\b/g;\n      const matches = message.match(pattern) || [];\n      console.log(\"Ham extract: \", matches);\n      return matches;\n    },\n    extractSharesAndCode(message) {\n      // Regex to find stock codes: assumes codes are upper-case letters optionally followed by numbers\n      const stockCodePattern = /\\b[A-Z]{1,5}\\b/g;\n      // Regex to find numbers: looks for numbers that may have commas and come after the word 'shares'\n      const sharesPattern = /(\\b\\d{1,3}(,\\d{3})*\\b)(?=\\s*shares)/gi;\n      const stockCodes = message.match(stockCodePattern);\n      const sharesMatches = message.match(sharesPattern);\n      let shares;\n      if (sharesMatches && sharesMatches.length > 0) {\n        // Remove commas and convert to integer\n        shares = parseInt(sharesMatches[0].replace(/,/g, ''), 10);\n      }\n\n      // We return the first stock code found and the number of shares, if any\n      return {\n        stockCode: stockCodes ? stockCodes[0] : null,\n        // Just taking the first match for simplicity\n        shares: shares || null\n      };\n    },\n    async calculateTotalValue(stockCode, shares) {\n      if (!stockCode || !shares) {\n        throw new Error(\"Stock code or number of shares missing.\");\n      }\n      try {\n        const price = await fetchStockPrice(stockCode);\n        // Convert price to a number and calculate total value\n        const totalValue = (Number(price) * shares).toFixed(2);\n        return totalValue;\n      } catch (error) {\n        console.error('Error calculating total value:', error);\n        throw error; // Re-throw the error to handle it in the calling function\n      }\n    },\n    mounted() {\n      // Update the current time every second\n      setInterval(() => {\n        this.currentTime = new Date().toLocaleTimeString();\n      }, 500);\n      console.log(\"other\");\n\n      // Add the user guidance message when the page loads\n      const guidanceMessage = `\n        Welcome to FinBud! Here are some tips to get started:\n        \n        **Stock Price Inquiry:** Type the stock code in uppercase (e.g., \"TSLA\").\n        **Financial Term Definitions:** Use \"Define\" followed by the term (e.g., \"define IPO\").\n        **General Financial Concepts:** Keywords include \"IPO\", \"Balance Sheet\", and \"Bond\".\n        **General Financial Advice:** For general inquiries, use descriptive terms.\n      `;\n      this.addTypingResponse(guidanceMessage.trim(), false);\n    }\n  }\n};","map":{"version":3,"names":["axios","ChatHeader","ChatFrame","MessageComponent","UserInput","fetchStockPrice","SideBar","name","props","components","data","newMessage","messages","userAvatar","require","botAvatar","currentThread","threads","watch","threadId","immediate","handler","newThreadId","console","log","updateCurrentThread","methods","clearMessage","thread","find","id","toString","error","addThread","newThread","length","push","editThread","index","editing","saveThreadName","newName","cancelEdit","selectThread","sendMessage","text","trim","isUser","typing","timestamp","Date","toLocaleTimeString","userMessage","toLowerCase","includes","term","substring","indexOf","response","post","addTypingResponse","definition","stockCode","extractStockCode","price","timeStamp","responseText","stockSymbol","analysis","typingMessage","username","setTimeout","$forceUpdate","message","pattern","matches","match","extractSharesAndCode","stockCodePattern","sharesPattern","stockCodes","sharesMatches","shares","parseInt","replace","calculateTotalValue","Error","totalValue","Number","toFixed","mounted","setInterval","currentTime","guidanceMessage"],"sources":["/Users/buidinhtri/Desktop/FindBud/FinBud-AI-bot/src/views/ChatView.vue"],"sourcesContent":["<template>\n  <div class=\"home-container\">\n    <SideBar\n      :threads=\"threads\"\n      @add-thread=\"addThread\"\n      @edit-thread=\"editThread\"\n      @save-thread-name=\"saveThreadName\"\n      @cancel-edit=\"cancelEdit\"\n      @select-thread=\"selectThread\"\n    />\n    <div class=\"chat-container\">\n      <ChatHeader :threadId=\"currentThread.id\" />\n      <ChatFrame>\n        <MessageComponent\n          v-for=\"(message, index) in messages\"\n          :key=\"index\"\n          :is-user=\"message.isUser\"\n          :text=\"message.text\"\n          :typing=\"message.typing\"\n          :timestamp=\"message.timestamp\"\n          :username=\"message.isUser ? 'Tri Bui' : 'FinBud Bot'\"\n          :avatar-src=\"message.isUser ? userAvatar : botAvatar\"\n        />\n      </ChatFrame>\n      <UserInput @send-message=\"sendMessage\" @clear-message=\"clearMessage\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport ChatHeader from '../components/ChatHeader.vue';\nimport ChatFrame from '../components/ChatFrame.vue';\nimport MessageComponent from '../components/MessageComponent.vue';\nimport UserInput from '../components/UserInput.vue';\nimport { fetchStockPrice } from '@/services/stockServices';\nimport SideBar from '../components/SideBar.vue';\n\nexport default {\n  name: 'ChatView',\n  props: ['threadId'],\n  components: {\n    ChatHeader,\n    ChatFrame,\n    MessageComponent,\n    UserInput,\n    SideBar\n  },\n  data() {\n    return {\n      newMessage: '',\n      messages: [],\n      userAvatar: require('@/assets/tri.jpeg'),\n      botAvatar: require('@/assets/bot.png'),\n      currentThread: {},\n      threads: []\n    };\n  },\n  watch: {\n    threadId: {\n      immediate: true,\n      handler(newThreadId) {\n        console.log('Received new thread ID:', newThreadId);\n        if (newThreadId != null) {\n          this.updateCurrentThread(newThreadId);\n        }\n      }\n    },\n  },\n  methods: {\n    clearMessage() {\n      this.newMessage = '';\n    },\n    updateCurrentThread(newThreadId) {\n      console.log(\"Update current thread function triggered: \", newThreadId);\n      const thread = this.threads.find(thread => thread.id.toString() === newThreadId);\n      console.log(thread);\n      if (thread) {\n        this.currentThread = thread;\n        this.messages = thread.messages || [];\n      } else {\n        console.error('Thread with ID', newThreadId, 'not found');\n        this.currentThread = {};\n        this.messages = [];\n      }\n      console.log(\"Current thread: \", this.currentThread);\n    },\n    addThread(newThread) {\n      newThread.id = this.threads.length + 1;\n      this.threads.push(newThread);\n      console.log(\"Added new thread: \", newThread);\n    },\n    editThread(index) {\n      this.threads[index].editing = true;\n    },\n    saveThreadName({ newName, index }) {\n      this.threads[index].name = newName;\n      this.threads[index].editing = false;\n    },\n    cancelEdit(index) {\n      this.threads[index].editing = false;\n    },\n    selectThread(index) {\n      this.updateCurrentThread(this.threads[index].id.toString());\n    },\n    async sendMessage(newMessage) {\n      console.log(\"start sending message in send message..\");\n\n      this.messages.push({\n        text: newMessage.trim(),\n        isUser: true,\n        typing: true,\n        timestamp: new Date().toLocaleTimeString()\n      });\n\n      this.newMessage = '';\n\n      const userMessage = this.messages[this.messages.length - 1].text;\n      if (userMessage.toLowerCase().includes(\"define\")) {\n        const term = userMessage.substring(userMessage.toLowerCase().indexOf(\"define\") + \"define\".length).trim();\n        try {\n          const response = await axios.post('/api/define-term', { term });\n          this.addTypingResponse(response.data.definition, false);\n        } catch (error) {\n          console.error('Error:', error);\n          this.messages.push({ text: `Error defining term.`, isUser: false, timestamp: new Date().toLocaleTimeString() });\n        }\n      } else {\n        const stockCode = this.extractStockCode(userMessage);\n        if (stockCode.length > 0) {\n          try {\n            const price = await fetchStockPrice(stockCode[0]);\n            const timeStamp = new Date().toLocaleTimeString();\n            console.log(\"This is time stamp when asking about stock price: \", timeStamp);\n            let responseText = `The current price of ${stockCode[0]} stock is $${price}, as of ${timeStamp}.`;\n\n            this.addTypingResponse(responseText, false);\n\n            const response = await axios.post('/api/analyze-stock', { stockSymbol: stockCode[0] });\n            this.addTypingResponse(response.data.analysis, false);\n          } catch (error) {\n            console.error('Error:', error);\n            this.messages.push({ text: `Error fetching data for ${stockCode}.`, isUser: false, timestamp: new Date().toLocaleTimeString() });\n          }\n        } else {\n          try {\n            const response = await axios.post('/api/norm-ans', { term: userMessage });\n            this.addTypingResponse(response.data.definition, false);\n          } catch (error) {\n            console.error('Error:', error);\n            this.messages.push({ text: `Error generating answer.`, isUser: false, timestamp: new Date().toLocaleTimeString() });\n          }\n        }\n      }\n    },\n    addTypingResponse(text, isUser) {\n      const typingMessage = {\n        text: text,\n        isUser: isUser,\n        typing: true,\n        timestamp: new Date().toLocaleTimeString(),\n        username: isUser ? 'You' : 'FinBud Bot'\n      };\n\n      this.messages.push(typingMessage);\n      setTimeout(() => {\n        typingMessage.text = text;\n        typingMessage.typing = false;\n        this.$forceUpdate();\n      }, 2000);\n    },\n    extractStockCode(message) {\n      const pattern = /\\b[A-Z]{3,5}\\b/g;\n      const matches = message.match(pattern) || [];\n      console.log(\"Ham extract: \", matches);\n      return matches;\n    },\n    extractSharesAndCode(message) {\n      // Regex to find stock codes: assumes codes are upper-case letters optionally followed by numbers\n      const stockCodePattern = /\\b[A-Z]{1,5}\\b/g;\n      // Regex to find numbers: looks for numbers that may have commas and come after the word 'shares'\n      const sharesPattern = /(\\b\\d{1,3}(,\\d{3})*\\b)(?=\\s*shares)/gi;\n\n      const stockCodes = message.match(stockCodePattern);\n      const sharesMatches = message.match(sharesPattern);\n\n      let shares;\n      if (sharesMatches && sharesMatches.length > 0) {\n        // Remove commas and convert to integer\n        shares = parseInt(sharesMatches[0].replace(/,/g, ''), 10);\n      }\n\n      // We return the first stock code found and the number of shares, if any\n      return {\n        stockCode: stockCodes ? stockCodes[0] : null, // Just taking the first match for simplicity\n        shares: shares || null\n      };\n    },\n    async calculateTotalValue(stockCode, shares) {\n      if (!stockCode || !shares) {\n        throw new Error(\"Stock code or number of shares missing.\");\n      }\n      try {\n        const price = await fetchStockPrice(stockCode);\n        // Convert price to a number and calculate total value\n        const totalValue = (Number(price) * shares).toFixed(2);\n        return totalValue;\n      } catch (error) {\n        console.error('Error calculating total value:', error);\n        throw error; // Re-throw the error to handle it in the calling function\n      }\n    },\n    mounted() {\n      // Update the current time every second\n      setInterval(() => {\n        this.currentTime = new Date().toLocaleTimeString();\n      }, 500);\n      console.log(\"other\")\n\n      // Add the user guidance message when the page loads\n      const guidanceMessage = `\n        Welcome to FinBud! Here are some tips to get started:\n        \n        **Stock Price Inquiry:** Type the stock code in uppercase (e.g., \"TSLA\").\n        **Financial Term Definitions:** Use \"Define\" followed by the term (e.g., \"define IPO\").\n        **General Financial Concepts:** Keywords include \"IPO\", \"Balance Sheet\", and \"Bond\".\n        **General Financial Advice:** For general inquiries, use descriptive terms.\n      `;\n      this.addTypingResponse(guidanceMessage.trim(), false);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.home-container {\n  display: flex; /* Changes the flex-direction to row by default */\n  width: 100%; /* Full width of the viewport */\n  height: 100vh; /* Full height of the viewport */\n}\n\n.chat-container {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}