{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport ChatHeader from '../components/ChatHeader.vue';\nimport ChatFrame from '../components/ChatFrame.vue';\nimport MessageComponent from '../components/MessageComponent.vue';\nimport UserInput from '../components/UserInput.vue';\nimport { fetchStockPrice } from '@/services/stockServices';\nimport { gptAPICall } from '@/services/gptServices';\nimport { gptAPICallDefine } from '@/services/gptServices';\nimport SideBar from '../components/SideBar.vue';\nexport default {\n  name: 'ChatView',\n  props: ['threadId'],\n  components: {\n    ChatHeader,\n    ChatFrame,\n    MessageComponent,\n    UserInput,\n    SideBar\n  },\n  data() {\n    return {\n      newMessage: '',\n      messages: [],\n      userAvatar: require('@/assets/tri.jpeg'),\n      botAvatar: require('@/assets/bot.png'),\n      currentThread: {},\n      threads: []\n    };\n  },\n  watch: {\n    threadId: {\n      immediate: true,\n      handler(newThreadId) {\n        console.log('Received new thread ID:', newThreadId);\n        if (newThreadId != null) {\n          this.updateCurrentThread(newThreadId);\n        }\n      }\n    }\n  },\n  methods: {\n    clearMessage() {\n      this.newMessage = '';\n    },\n    updateCurrentThread(newThreadId) {\n      console.log(\"Update current thread function triggered: \", newThreadId);\n      const thread = this.threads.find(thread => thread.id.toString() === newThreadId);\n      console.log(thread);\n      if (thread) {\n        this.currentThread = thread;\n        this.messages = thread.messages || [];\n      } else {\n        console.error('Thread with ID', newThreadId, 'not found');\n        this.currentThread = {};\n        this.messages = [];\n      }\n      console.log(\"Current thread: \", this.currentThread);\n    },\n    addThread(newThread) {\n      newThread.id = this.threads.length + 1;\n      this.threads.push(newThread);\n      console.log(\"Added new thread: \", newThread);\n    },\n    editThread(index) {\n      this.threads[index].editing = true;\n    },\n    saveThreadName({\n      newName,\n      index\n    }) {\n      this.threads[index].name = newName;\n      this.threads[index].editing = false;\n    },\n    cancelEdit(index) {\n      this.threads[index].editing = false;\n    },\n    selectThread(index) {\n      this.updateCurrentThread(this.threads[index].id.toString());\n    },\n    async sendMessage(newMessage) {\n      console.log(\"start sending message in send message..\");\n      this.messages.push({\n        text: newMessage.trim(),\n        isUser: true,\n        typing: true,\n        timestamp: new Date().toLocaleTimeString()\n      });\n      this.newMessage = '';\n      const stockCode = this.extractStockCode(this.messages[this.messages.length - 1].text);\n      if (stockCode.length > 0) {\n        try {\n          const price = await fetchStockPrice(stockCode[0]);\n          const timeStamp = new Date().toLocaleTimeString();\n          console.log(\"This is time stamp when asking about stock price: \", timeStamp);\n          let responseText = `The current price of ${stockCode[0]} stock is $${price}, as of ${timeStamp}.`;\n          this.addTypingResponse(responseText, false);\n          const response = await axios.post('/api/analyze-stock', {\n            stockSymbol: stockCode[0]\n          });\n          this.addTypingResponse(response.data.analysis, false);\n        } catch (error) {\n          console.error('Error:', error);\n          this.messages.push({\n            text: `Error fetching data for ${stockCode}.`,\n            isUser: false,\n            timestamp: new Date().toLocaleTimeString()\n          });\n        }\n      } else {\n        const userMessage = this.messages[this.messages.length - 1].text;\n        setTimeout(async () => {\n          if (userMessage.toLowerCase().includes(\"define\")) {\n            const term = userMessage.substring(userMessage.toLowerCase().indexOf(\"define\") + \"define\".length).trim();\n            try {\n              const response = await axios.post('/api/define-term', {\n                term\n              });\n              this.addTypingResponse(response.data.definition, false);\n            } catch (error) {\n              console.error('Error:', error);\n              this.messages.push({\n                text: `Error defining term.`,\n                isUser: false,\n                timestamp: new Date().toLocaleTimeString()\n              });\n            }\n          } else if (userMessage.toLowerCase().includes(\"ipo\")) {\n            this.addTypingResponse(\"IPO stands for Initial Public Offering. It's when a company sells its shares to the public for the first time. Think of it like when a company decides to let anyone buy a small piece of it.\", false);\n          } else if (userMessage.toLowerCase().includes(\"balance sheet\")) {\n            this.addTypingResponse(\"A balance sheet is like a financial snapshot of a company at a specific point in time. It shows what the company owns (assets), what it owes (liabilities), and the value left over for the owners (equity). Think of it as a list that helps you understand a company's financial health.\", false);\n          } else if (userMessage.toLowerCase().includes(\"bond\")) {\n            this.addTypingResponse(\"Bonds are loans from investors to companies or governments. Investors receive regular interest payments and get their money back when the bond matures. Think of it like lending money to a friend with a promise. When you give them the money, they agree to pay you back a little extra each month (interest) and return the full amount you lent them after a certain time (maturity).\", false);\n          } else {\n            setTimeout(() => {\n              this.addTypingResponse('I am FinBud, your AI financial assistant developed by Bui Dinh Tri. I am specially configured on the GPT-3.5 Turbo platform to provide deeper insights and expertise in finance and stock markets.', false);\n            }, 300);\n          }\n        }, 2000);\n      }\n    },\n    addTypingResponse(text, isUser) {\n      const typingMessage = {\n        text: text,\n        isUser: isUser,\n        typing: true,\n        timestamp: new Date().toLocaleTimeString(),\n        username: isUser ? 'You' : 'FinBud Bot'\n      };\n      this.messages.push(typingMessage);\n      setTimeout(() => {\n        typingMessage.text = text;\n        typingMessage.typing = false;\n        this.$forceUpdate();\n      }, 2000);\n    },\n    extractStockCode(message) {\n      const pattern = /\\b[A-Z]{3,5}\\b/g;\n      const matches = message.match(pattern) || [];\n      console.log(\"Ham extract: \", matches);\n      return matches;\n    },\n    extractSharesAndCode(message) {\n      // Regex to find stock codes: assumes codes are upper-case letters optionally followed by numbers\n      const stockCodePattern = /\\b[A-Z]{1,5}\\b/g;\n      // Regex to find numbers: looks for numbers that may have commas and come after the word 'shares'\n      const sharesPattern = /(\\b\\d{1,3}(,\\d{3})*\\b)(?=\\s*shares)/gi;\n      const stockCodes = message.match(stockCodePattern);\n      const sharesMatches = message.match(sharesPattern);\n      let shares;\n      if (sharesMatches && sharesMatches.length > 0) {\n        // Remove commas and convert to integer\n        shares = parseInt(sharesMatches[0].replace(/,/g, ''), 10);\n      }\n\n      // We return the first stock code found and the number of shares, if any\n      return {\n        stockCode: stockCodes ? stockCodes[0] : null,\n        // Just taking the first match for simplicity\n        shares: shares || null\n      };\n    },\n    async calculateTotalValue(stockCode, shares) {\n      if (!stockCode || !shares) {\n        throw new Error(\"Stock code or number of shares missing.\");\n      }\n      try {\n        const price = await fetchStockPrice(stockCode);\n        // Convert price to a number and calculate total value\n        const totalValue = (Number(price) * shares).toFixed(2);\n        return totalValue;\n      } catch (error) {\n        console.error('Error calculating total value:', error);\n        throw error; // Re-throw the error to handle it in the calling function\n      }\n    },\n    async fakeResponse(message) {\n      // Simulate fake response from the backend API\n      return \"This is a fake response to the message: \" + message;\n    },\n    mounted() {\n      // Update the current time every second\n      setInterval(() => {\n        this.currentTime = new Date().toLocaleTimeString();\n      }, 500);\n    }\n  }\n};","map":{"version":3,"names":["axios","ChatHeader","ChatFrame","MessageComponent","UserInput","fetchStockPrice","gptAPICall","gptAPICallDefine","SideBar","name","props","components","data","newMessage","messages","userAvatar","require","botAvatar","currentThread","threads","watch","threadId","immediate","handler","newThreadId","console","log","updateCurrentThread","methods","clearMessage","thread","find","id","toString","error","addThread","newThread","length","push","editThread","index","editing","saveThreadName","newName","cancelEdit","selectThread","sendMessage","text","trim","isUser","typing","timestamp","Date","toLocaleTimeString","stockCode","extractStockCode","price","timeStamp","responseText","addTypingResponse","response","post","stockSymbol","analysis","userMessage","setTimeout","toLowerCase","includes","term","substring","indexOf","definition","typingMessage","username","$forceUpdate","message","pattern","matches","match","extractSharesAndCode","stockCodePattern","sharesPattern","stockCodes","sharesMatches","shares","parseInt","replace","calculateTotalValue","Error","totalValue","Number","toFixed","fakeResponse","mounted","setInterval","currentTime"],"sources":["/Users/buidinhtri/Desktop/FindBud/FinBud-AI-bot/src/views/ChatView.vue"],"sourcesContent":["<template>\n  <div class=\"home-container\">\n    <SideBar\n      :threads=\"threads\"\n      @add-thread=\"addThread\"\n      @edit-thread=\"editThread\"\n      @save-thread-name=\"saveThreadName\"\n      @cancel-edit=\"cancelEdit\"\n      @select-thread=\"selectThread\"\n    />\n    <div class=\"chat-container\">\n      <ChatHeader :threadId=\"currentThread.id\" />\n      <ChatFrame>\n        <MessageComponent\n          v-for=\"(message, index) in messages\"\n          :key=\"index\"\n          :is-user=\"message.isUser\"\n          :text=\"message.text\"\n          :typing=\"message.typing\"\n          :timestamp=\"message.timestamp\"\n          :username=\"message.isUser ? 'Tri Bui' : 'FinBud Bot'\"\n          :avatar-src=\"message.isUser ? userAvatar : botAvatar\"\n        />\n      </ChatFrame>\n      <UserInput @send-message=\"sendMessage\" @clear-message=\"clearMessage\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport ChatHeader from '../components/ChatHeader.vue';\nimport ChatFrame from '../components/ChatFrame.vue';\nimport MessageComponent from '../components/MessageComponent.vue';\nimport UserInput from '../components/UserInput.vue';\nimport { fetchStockPrice } from '@/services/stockServices';\nimport { gptAPICall } from '@/services/gptServices';\nimport { gptAPICallDefine } from '@/services/gptServices';\nimport SideBar from '../components/SideBar.vue';\n\nexport default {\n  name: 'ChatView',\n  props: ['threadId'],\n  components: {\n    ChatHeader,\n    ChatFrame,\n    MessageComponent,\n    UserInput,\n    SideBar\n  },\n  data() {\n    return {\n      newMessage: '',\n      messages: [],\n      userAvatar: require('@/assets/tri.jpeg'),\n      botAvatar: require('@/assets/bot.png'),\n      currentThread: {},\n      threads: []\n    };\n  },\n  watch: {\n    threadId: {\n      immediate: true,\n      handler(newThreadId) {\n        console.log('Received new thread ID:', newThreadId);\n        if (newThreadId != null) {\n          this.updateCurrentThread(newThreadId);\n        }\n      }\n    },\n  },\n  methods: {\n    clearMessage() {\n      this.newMessage = '';\n    },\n    updateCurrentThread(newThreadId) {\n      console.log(\"Update current thread function triggered: \", newThreadId);\n      const thread = this.threads.find(thread => thread.id.toString() === newThreadId);\n      console.log(thread);\n      if (thread) {\n        this.currentThread = thread;\n        this.messages = thread.messages || [];\n      } else {\n        console.error('Thread with ID', newThreadId, 'not found');\n        this.currentThread = {};\n        this.messages = [];\n      }\n      console.log(\"Current thread: \", this.currentThread);\n    },\n    addThread(newThread) {\n      newThread.id = this.threads.length + 1;\n      this.threads.push(newThread);\n      console.log(\"Added new thread: \", newThread);\n    },\n    editThread(index) {\n      this.threads[index].editing = true;\n    },\n    saveThreadName({ newName, index }) {\n      this.threads[index].name = newName;\n      this.threads[index].editing = false;\n    },\n    cancelEdit(index) {\n      this.threads[index].editing = false;\n    },\n    selectThread(index) {\n      this.updateCurrentThread(this.threads[index].id.toString());\n    },\n    async sendMessage(newMessage) {\n      console.log(\"start sending message in send message..\");\n\n      this.messages.push({\n        text: newMessage.trim(),\n        isUser: true,\n        typing: true,\n        timestamp: new Date().toLocaleTimeString()\n      });\n\n      this.newMessage = '';\n\n      const stockCode = this.extractStockCode(this.messages[this.messages.length - 1].text);\n      if (stockCode.length > 0) {\n        try {\n          const price = await fetchStockPrice(stockCode[0]);\n          const timeStamp = new Date().toLocaleTimeString();\n          console.log(\"This is time stamp when asking about stock price: \", timeStamp);\n          let responseText = `The current price of ${stockCode[0]} stock is $${price}, as of ${timeStamp}.`;\n\n          this.addTypingResponse(responseText, false);\n\n          const response = await axios.post('/api/analyze-stock', { stockSymbol: stockCode[0] });\n          this.addTypingResponse(response.data.analysis, false);\n        } catch (error) {\n          console.error('Error:', error);\n          this.messages.push({ text: `Error fetching data for ${stockCode}.`, isUser: false, timestamp: new Date().toLocaleTimeString() });\n        }\n      } else {\n        const userMessage = this.messages[this.messages.length - 1].text;\n        setTimeout(async () => {\n          if (userMessage.toLowerCase().includes(\"define\")) {\n            const term = userMessage.substring(userMessage.toLowerCase().indexOf(\"define\") + \"define\".length).trim();\n            try {\n              const response = await axios.post('/api/define-term', { term });\n              this.addTypingResponse(response.data.definition, false);\n            } catch (error) {\n              console.error('Error:', error);\n              this.messages.push({ text: `Error defining term.`, isUser: false, timestamp: new Date().toLocaleTimeString() });\n            }\n          } else if (userMessage.toLowerCase().includes(\"ipo\")) {\n            this.addTypingResponse(\"IPO stands for Initial Public Offering. It's when a company sells its shares to the public for the first time. Think of it like when a company decides to let anyone buy a small piece of it.\", false);\n          } else if (userMessage.toLowerCase().includes(\"balance sheet\")) {\n            this.addTypingResponse(\"A balance sheet is like a financial snapshot of a company at a specific point in time. It shows what the company owns (assets), what it owes (liabilities), and the value left over for the owners (equity). Think of it as a list that helps you understand a company's financial health.\", false);\n          } else if (userMessage.toLowerCase().includes(\"bond\")) {\n            this.addTypingResponse(\"Bonds are loans from investors to companies or governments. Investors receive regular interest payments and get their money back when the bond matures. Think of it like lending money to a friend with a promise. When you give them the money, they agree to pay you back a little extra each month (interest) and return the full amount you lent them after a certain time (maturity).\", false);\n          } else {\n            setTimeout(\n              () => {\n                this.addTypingResponse('I am FinBud, your AI financial assistant developed by Bui Dinh Tri. I am specially configured on the GPT-3.5 Turbo platform to provide deeper insights and expertise in finance and stock markets.', false);\n              }, 300\n            );\n          }\n        }, 2000);\n      }\n    },\n    addTypingResponse(text, isUser) {\n      const typingMessage = {\n        text: text,\n        isUser: isUser,\n        typing: true,\n        timestamp: new Date().toLocaleTimeString(),\n        username: isUser ? 'You' : 'FinBud Bot'\n      };\n\n      this.messages.push(typingMessage);\n      setTimeout(() => {\n        typingMessage.text = text;\n        typingMessage.typing = false;\n        this.$forceUpdate();\n      }, 2000);\n    },\n    extractStockCode(message) {\n      const pattern = /\\b[A-Z]{3,5}\\b/g;\n      const matches = message.match(pattern) || [];\n      console.log(\"Ham extract: \", matches);\n      return matches;\n    },\n    extractSharesAndCode(message) {\n      // Regex to find stock codes: assumes codes are upper-case letters optionally followed by numbers\n      const stockCodePattern = /\\b[A-Z]{1,5}\\b/g;\n      // Regex to find numbers: looks for numbers that may have commas and come after the word 'shares'\n      const sharesPattern = /(\\b\\d{1,3}(,\\d{3})*\\b)(?=\\s*shares)/gi;\n\n      const stockCodes = message.match(stockCodePattern);\n      const sharesMatches = message.match(sharesPattern);\n\n      let shares;\n      if (sharesMatches && sharesMatches.length > 0) {\n        // Remove commas and convert to integer\n        shares = parseInt(sharesMatches[0].replace(/,/g, ''), 10);\n      }\n\n      // We return the first stock code found and the number of shares, if any\n      return {\n        stockCode: stockCodes ? stockCodes[0] : null, // Just taking the first match for simplicity\n        shares: shares || null\n      };\n    },\n    async calculateTotalValue(stockCode, shares) {\n      if (!stockCode || !shares) {\n        throw new Error(\"Stock code or number of shares missing.\");\n      }\n      try {\n        const price = await fetchStockPrice(stockCode);\n        // Convert price to a number and calculate total value\n        const totalValue = (Number(price) * shares).toFixed(2);\n        return totalValue;\n      } catch (error) {\n        console.error('Error calculating total value:', error);\n        throw error; // Re-throw the error to handle it in the calling function\n      }\n    },\n    async fakeResponse(message) {\n      // Simulate fake response from the backend API\n      return \"This is a fake response to the message: \" + message;\n    },\n    mounted() {\n      // Update the current time every second\n      setInterval(() => {\n        this.currentTime = new Date().toLocaleTimeString();\n      }, 500);\n    }\n  }\n};\n</script>\n\n\n<style scoped>\n.home-container {\n  display: flex; /* Changes the flex-direction to row by default */\n  width: 100%; /* Full width of the viewport */\n  height: 100vh; /* Full height of the viewport */\n}\n\n.chat-container {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}